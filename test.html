<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload File</title>
  <style>
    .file-preview {
      border: none;
      /* ƒê·∫∑t chi·ªÅu r·ªông c·ªßa ƒë∆∞·ªùng vi·ªÅn */
      padding: 2px;
      /* Th√™m m·ªôt √≠t padding ƒë·ªÉ t·∫°o kho·∫£ng c√°ch gi·ªØa vƒÉn b·∫£n v√† ƒë∆∞·ªùng vi·ªÅn */
      margin-bottom: 10px;
      background-color: #f5f5f5;
      width: 400px;
      display: flex;
      /* S·ª≠ d·ª•ng Flexbox ƒë·ªÉ cƒÉn gi·ªØa n·ªôi dung */
      align-items: center;
      /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
    }

    .file-name {
      color: #15c;
      font-weight: bold;
      margin-left: 5px;
    }

    .delete-button {
      background-color: transparent;
      border: none;
      color: red;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <h2>Upload File</h2>
  <form action="check.php" method="post" enctype="multipart/form-data">
    <input type="file" name="fileToUpload[]" id="fileToUpload" multiple onchange="previewFiles()">
    <input type="submit" value="Upload File" name="submit">
  </form>

  <div id="preview"></div>
  <p id="fileList"></p>
  <script>
    function previewFiles() {
      var preview = document.getElementById('preview');
      var files = document.getElementById('fileToUpload').files;

      preview.innerHTML = '';

      // alert(files.length);
      for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var fileTypeIcon = getFileTypeIcon(file.type);

        // C·∫Øt chu·ªói t√™n t·∫≠p tin n·∫øu v∆∞·ª£t qu√° 35 k√Ω t·ª±
        var fileNameText = file.name.length > 35 ? file.name.substring(0, 35) + '...' : file.name;
        var fileName = document.createElement('span');
        fileName.textContent = fileNameText;
        fileName.className = 'file-name'; // ƒê·∫∑t l·ªõp cho ph·∫ßn t·ª≠ <span> ch·ª©a vƒÉn b·∫£n

        var filePreview = document.createElement('div');
        filePreview.appendChild(fileTypeIcon);
        filePreview.appendChild(fileName);
        filePreview.className = 'file-preview'; // Th√™m l·ªõp CSS cho ph·∫ßn t·ª≠ <div>

        preview.appendChild(filePreview);
        var deleteButton = document.createElement('button');
        deleteButton.textContent = 'X√≥a';
        deleteButton.className = 'delete-button';
        deleteButton.onclick = function () {
          // L·∫•y ph·∫ßn t·ª≠ cha c·ªßa n√∫t x√≥a (l√† ph·∫ßn t·ª≠ <div> ch·ª©a th√¥ng tin t·ªáp)
          var filePreview = this.parentElement;
          // Lo·∫°i b·ªè ph·∫ßn t·ª≠ <div> ch·ª©a th√¥ng tin t·ªáp
          preview.removeChild(filePreview);
          // C·∫≠p nh·∫≠t l·∫°i danh s√°ch t·ªáp
          updateFileList();
        };
        filePreview.appendChild(deleteButton);

      }


    }

    function updateFileList() {
      var files = document.getElementById('fileToUpload').files;
      var fileList = [];
      for (var i = 0; i < files.length; i++) {
        fileList.push(files[i].name);
      }
      // Hi·ªÉn th·ªã danh s√°ch t·ªáp trong m·ªôt ph·∫ßn t·ª≠ HTML
      document.getElementById('preview').textContent = fileList.join(', ');
    }

    function getFileTypeIcon(fileType) {
      // C√°c lo·∫°i t·∫≠p tin v√† bi·ªÉu t∆∞·ª£ng t∆∞∆°ng ·ª©ng
      var fileTypeIcons = {
        'image/jpeg': 'üñºÔ∏è', // Lo·∫°i MIME cho ·∫£nh JPEG
        'image/png': 'üñºÔ∏è', // Lo·∫°i MIME cho ·∫£nh PNG
        'video/mp4': 'üìπ', // Lo·∫°i MIME cho video MP4
        'application/pdf': 'üìÑ',
        'text/plain': 'üìÑ',
        'application/msword': 'üìÑ',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'üìÑ',
        'application/vnd.ms-excel': 'üìÑ',
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'üìÑ',
        'application/vnd.ms-powerpoint': 'üìÑ',
        'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'üìÑ',
        'application/zip': 'üìÅ',
        'application/x-rar-compressed': 'üìÅ',
        'application/x-tar': 'üìÅ',
        'application/x-7z-compressed': 'üìÅ',
        'application/vnd.android.package-archive': 'üì¶',
        'application/x-msdownload': 'üì¶',
        'application/x-diskcopy': 'üíæ',
        'application/octet-stream': 'üì¶',
        'application/x-sh': 'üìÑ',
        'application/x-csh': 'üìÑ',
        'application/x-executable': 'üì¶',
        'application/java-archive': 'üì¶',
        'application/javascript': 'üìÑ',
        'application/json': 'üìÑ',
        'application/xml': 'üìÑ',
        'text/html': 'üìÑ',
        'text/css': 'üìÑ',
        'text/csv': 'üìÑ',
        'text/calendar': 'üìÑ',
        'text/javascript': 'üìÑ',
        'text/php': 'üìÑ',
      };

      // Ki·ªÉm tra xem lo·∫°i t·∫≠p tin c√≥ t·ªìn t·∫°i trong danh s√°ch kh√¥ng
      if (fileType in fileTypeIcons) {
        var icon = document.createElement('span');
        icon.textContent = fileTypeIcons[fileType];
        return icon;
      } else {
        // N·∫øu kh√¥ng t√¨m th·∫•y bi·ªÉu t∆∞·ª£ng, tr·∫£ v·ªÅ bi·ªÉu t∆∞·ª£ng m·∫∑c ƒë·ªãnh
        var defaultIcon = document.createElement('span');
        defaultIcon.textContent = 'üìÅ'; // Bi·ªÉu t∆∞·ª£ng th∆∞ m·ª•c
        return defaultIcon;
      }
    }
  </script>
</body>

</html>