<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload File</title>
  <style>
    .file-preview {
      border: none;
      /* Đặt chiều rộng của đường viền */
      padding: 2px;
      /* Thêm một ít padding để tạo khoảng cách giữa văn bản và đường viền */
      margin-bottom: 10px;
      background-color: #f5f5f5;
      width: 400px;
      display: flex;
      /* Sử dụng Flexbox để căn giữa nội dung */
      align-items: center;
      /* Căn giữa theo chiều dọc */
    }

    .file-name {
      color: #15c;
      font-weight: bold;
      margin-left: 5px;
    }
  </style>
</head>

<body>
  <h2>Upload File</h2>
  <form action="check.php" method="post" enctype="multipart/form-data">
    <input type="file" name="fileToUpload[]" id="fileToUpload" multiple onchange="previewFiles()">
    <input type="submit" value="Upload File" name="submit">
  </form>

  <div id="preview"></div>

  <script>
    function previewFiles() {
      var preview = document.getElementById('preview');
      var files = document.getElementById('fileToUpload').files;

      preview.innerHTML = '';

      for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var fileTypeIcon = getFileTypeIcon(file.type);

        // Cắt chuỗi tên tập tin nếu vượt quá 35 ký tự
        var fileNameText = file.name.length > 35 ? file.name.substring(0, 35) + '...' : file.name;
        var fileName = document.createElement('span');
        fileName.textContent = fileNameText;
        fileName.className = 'file-name'; // Đặt lớp cho phần tử <span> chứa văn bản

        var filePreview = document.createElement('div');
        filePreview.appendChild(fileTypeIcon);
        filePreview.appendChild(fileName);
        filePreview.className = 'file-preview'; // Thêm lớp CSS cho phần tử <div>

        preview.appendChild(filePreview);
      }
    }

    function getFileTypeIcon(fileType) {
      // Các loại tập tin và biểu tượng tương ứng
      var fileTypeIcons = {
        'image/jpeg': '🖼️', // Loại MIME cho ảnh JPEG
        'image/png': '🖼️', // Loại MIME cho ảnh PNG
        'video/mp4': '📹', // Loại MIME cho video MP4
        'application/pdf': '📄',
        'text/plain': '📄',
        'application/msword': '📄',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document': '📄',
        'application/vnd.ms-excel': '📄',
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': '📄',
        'application/vnd.ms-powerpoint': '📄',
        'application/vnd.openxmlformats-officedocument.presentationml.presentation': '📄',
        'application/zip': '📁',
        'application/x-rar-compressed': '📁',
        'application/x-tar': '📁',
        'application/x-7z-compressed': '📁',
        'application/vnd.android.package-archive': '📦',
        'application/x-msdownload': '📦',
        'application/x-diskcopy': '💾',
        'application/octet-stream': '📦',
        'application/x-sh': '📄',
        'application/x-csh': '📄',
        'application/x-executable': '📦',
        'application/java-archive': '📦',
        'application/javascript': '📄',
        'application/json': '📄',
        'application/xml': '📄',
        'text/html': '📄',
        'text/css': '📄',
        'text/csv': '📄',
        'text/calendar': '📄',
        'text/javascript': '📄',
        'text/php': '📄',
      };

      // Kiểm tra xem loại tập tin có tồn tại trong danh sách không
      if (fileType in fileTypeIcons) {
        var icon = document.createElement('span');
        icon.textContent = fileTypeIcons[fileType];
        return icon;
      } else {
        // Nếu không tìm thấy biểu tượng, trả về biểu tượng mặc định
        var defaultIcon = document.createElement('span');
        defaultIcon.textContent = '📁'; // Biểu tượng thư mục
        return defaultIcon;
      }
    }
  </script>
</body>

</html>